output {

  if "_grokparsefailure" in [tags] {
    elasticsearch {
      hosts => [ <%= p @elasticsearch_adresses.map {|l| "\"#{l}:9200\""}.join(',') %> ]
      index => "logstash-parsefailure-%{+YYYY.MM.dd}"
    }
  } else if [fields][testdata] {
    elasticsearch {
      hosts => [ <%= p @elasticsearch_adresses.map {|l| "\"#{l}:9200\""}.join(',') %> ]
      index => "logstash-testdata-%{+YYYY.MM.dd}"
    }
  } else if [fields][longterm]  {
    elasticsearch {
      hosts => [ <%= p @elasticsearch_adresses.map {|l| "\"#{l}:9200\""}.join(',') %> ]
      index => "logstash-longterm-%{+YYYY.MM.dd}"
    }
  } else {
    elasticsearch {
      hosts => [ <%= p @elasticsearch_adresses.map {|l| "\"#{l}:9200\""}.join(',') %> ]
    }
  }

}
